<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="theme-color" content="#0f172a" />
  <title>RADMON • QR Code Scanner</title>
  
  <!-- Fonts (opsional, aman jika offline akan fallback ke system font) -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet" />

  <style>
    :root{
      --bg-start:#0f172a;   /* slate-900 */
      --bg-end:#020617;     /* slate-950 */
      --card:#0b1220cc;     /* glass */
      --card-border:#1f2b47; 
      --text:#e5e7eb;       /* gray-200 */
      --muted:#94a3b8;      /* slate-400 */
      --brand:#22d3ee;      /* cyan-400 */
      --brand-2:#60a5fa;    /* blue-400 */
      --accent:#34d399;     /* emerald-400 */
      --danger:#f87171;     /* red-400 */
      --btn:#111827;        /* gray-900 */
      --ring: 0 0 0 8px #22d3ee1f;
    }

    * { box-sizing: border-box; }
    html, body { height: 100%; }

    body{
      margin: 0;
      font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji";
      color: var(--text);
      background: radial-gradient(1200px 800px at 10% 10%, #0ea5e96b, transparent 50%),
                  radial-gradient(900px 600px at 90% 20%, #22d3ee3b, transparent 50%),
                  linear-gradient(180deg, var(--bg-start), var(--bg-end));
      background-attachment: fixed;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }

    .container{
      min-height: 100dvh;
      display: grid;
      place-items: center;
      padding: 24px;
    }

    .card{
      width: min(960px, 100%);
      border: 1px solid var(--card-border);
      background: linear-gradient(180deg, #0b1220dd, #0b1220b3);
      backdrop-filter: blur(10px);
      border-radius: 24px;
      box-shadow: 0 10px 30px #00000066, inset 0 1px 0 #ffffff0a;
      overflow: hidden;
    }

    .header{
      padding: 28px 24px 8px;
      display: flex; align-items: center; justify-content: space-between; gap: 16px;
    }

    .brand{
      display: flex; align-items: center; gap: 12px;
    }
    .brand-logo{
      width: 42px; height: 42px; border-radius: 12px;
      background: conic-gradient(from 210deg, var(--brand), var(--brand-2), var(--accent));
      box-shadow: 0 0 0 2px #ffffff0f inset;
    }
    .brand-title{ font-weight: 800; letter-spacing: .5px; }
    .brand-sub{ color: var(--muted); font-size: 13px; margin-top: 2px; }

    .actions{ display: flex; flex-wrap: wrap; gap: 10px; }

    .btn{
      appearance: none; border: 1px solid #26334f; cursor: pointer;
      border-radius: 12px; padding: 10px 14px; min-width: 160px;
      background: #0b1220; color: var(--text); font-weight: 600;
      display: inline-flex; align-items: center; justify-content: center; gap: 10px;
      transition: transform .08s ease, box-shadow .2s ease, border-color .2s ease, background .2s ease;
      text-decoration: none;
    }
    .btn:hover{ box-shadow: var(--ring); border-color: #2e3e67; }
    .btn:active{ transform: translateY(1px); }

    .btn-primary{ background: linear-gradient(180deg, #0ea5e933, #0ea5e91a); border-color: #2563eb66; }
    .btn-danger{ background: linear-gradient(180deg, #ef44441a, transparent); border-color: #ef444466; }

    .content{ padding: 8px 24px 24px; }

    .camera-wrap{
      position: relative; border: 1px dashed #2b3a5e; border-radius: 18px; overflow: hidden;
      background: #0b1220;
    }

    /* Bidang video diinject oleh radmon_webqr.js ke dalam #outdiv */
    #outdiv{ width: 100%; }
    #outdiv video{ display:block; width: 100% !important; height: auto !important; }

    /* Overlay frame */
    .frame{
      pointer-events: none; position: absolute; inset: 0; display: grid; place-items: center;
    }
    .frame::before{
      content: ""; width: min(76vmin, 520px); aspect-ratio: 1/1; border-radius: 18px;
      border: 2px solid #22d3eeaa; box-shadow: 0 0 40px #22d3ee33, inset 0 0 60px #22d3ee12;
    }

    /* Placeholder saat kamera belum aktif */
    .placeholder{
      display: grid; place-items: center; min-height: 52vh; color: var(--muted);
      background: repeating-linear-gradient(45deg, #0f172a, #0f172a 10px, #0b1220 10px, #0b1220 20px);
    }

    .footer{
      display: flex; align-items: center; justify-content: space-between; gap: 12px;
      padding: 16px 24px; border-top: 1px solid #1f2b47; background: #0b1220aa;
      color: var(--muted); font-size: 13px;
    }

    a{ color: var(--brand); text-decoration: none; }
    a:hover{ text-decoration: underline; }

    /* Icon fontello tetap kompatibel */
    @font-face {
      font-family: 'fontello';
      src: url('./font/fontello.eot?14907215');
      src: url('./font/fontello.eot?14907215#iefix') format('embedded-opentype'),
           url('./font/fontello.woff?14907215') format('woff'),
           url('./font/fontello.ttf?14907215') format('truetype'),
           url('./font/fontello.svg?14907215#fontello') format('svg');
      font-weight: normal; font-style: normal;
    }
    .icon{ font-family: "fontello"; font-style: normal; font-weight: normal; speak: none; display: inline-block; width: 1em; text-align: center; line-height: 1em; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; }

    /* Responsif */
    @media (max-width: 520px){
      .btn{ min-width: unset; flex: 1 1 auto; }
      .header{ flex-direction: column; align-items: flex-start; gap: 12px; }
      .actions{ width: 100%; }
    }
  </style>

  <script type="text/javascript" src="llqrcode.js"></script>
  <script type="text/javascript" src="radmon_webqr.js?v1"></script>
  <script async src="https://arc.io/widget.min.js#rDZc6s4f"></script>
</head>
<body>
  <div class="container">
    <section class="card" role="region" aria-label="Pemindai Kode QR">
      <header class="header">
        <div class="brand">
          <div class="brand-logo" aria-hidden="true"></div>
          <div>
            <div class="brand-title">RADMON</div>
            <div class="brand-sub">QR Code Scanner</div>
          </div>
        </div>
        <div class="actions">
          <button id="reload" class="btn btn-danger" onclick="location.reload()">
            <span class="icon">&#xe800;</span> Muat Ulang Kamera
          </button>
          <a class="btn btn-primary" href="intent://maizil41.github.io/scanner#Intent;scheme=http;package=com.android.chrome;end">
            <span class="icon">&#xf268;</span> Buka di Chrome
          </a>
        </div>
      </header>

      <div class="content">
        <div class="camera-wrap" aria-live="polite">
          <!-- Placeholder diganti ketika stream video muncul -->
          <div id="outdiv" class="placeholder">
            <div>
              <p style="margin:0 0 6px; font-weight:600">Mengaktifkan kamera…</p>
              <small>Jika diminta izin, pilih <b>Allow / Izinkan</b>.</small>
            </div>
          </div>
          <div class="frame" aria-hidden="true"></div>
        </div>
      </div>

      <footer class="footer">
        <span>Privasi: proses scan berlangsung lokal di perangkat Anda.</span>
        <span>© <span id="y"></span> RADMON</span>
      </footer>
    </section>
  </div>

  <!-- Kanvas yang dipakai oleh radmon_webqr.js -->
  <canvas style="display:none;" id="qr-canvas" width="800" height="600"></canvas>

  <script>
    // Inisialisasi scanner bawaan
    try{ load(); }catch(e){ console.error(e); }

    // Tahun dinamis di footer
    document.getElementById('y').textContent = new Date().getFullYear();
  </script>
</body>
</html>
